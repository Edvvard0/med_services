# Медицинская информационная система (МИС)

Этот проект представляет собой реализацию медицинской информационной системы (МИС).
Система разработана для управления потоком пациентов, включая регистрацию,
госпитализацию и направление на лечебно-диагностические мероприятия.
Проект включает веб-интерфейс.


### Работа с базой данных и данными
- **СУБД:** SQLite (временное решение, с планами перехода на PostgreSQL).

- **Схема базы данных:** Подробная схема доступна по [ссылке](https://dbdiagram.io/d/670a4c8397a66db9a3bd34fa).


### Подсистема «Управление потоком пациентов»

1. **Регистрация пациентов:**
   - Веб-интерфейс для ввода данных о пациенте (ФИО, паспорт, страховой полис и т.д.).
   - Генерация уникального идентификатора медкарты. Для автоматической генерации я использовал UUID.
   - Генерация QR-кода для медкарты.
   - Подготовка документов: договор на обслуживание и согласие на обработку данных в формате `.docx`.
   - Прикрепление фото пациента при его регистрации.

2. **Госпитализация:**
   - Веб-интерфейс для ввода данных и записи на госпитализацию.
   - Отображение информации по коду госпитализации (диагноз, цель, отделение и т.д.).

3. **Направление на лечебно-диагностические мероприятия:**
   - Веб-интерфейс с авторизацией врача.
   - Просмотр данных пациента, работа с медкартой, формирование рецептов и направлений.

---

## Используемый стек технологий

- **Backend:** 
  - Python 3.12
  - FastAPI — для создания API.
  - SQLAlchemy (асинхронный) — для работы с базой данных.
  - Alembic — для управления миграциями базы данных.
- **Frontend:**
  - Jinja2 — для рендеринга HTML-шаблонов в веб-интерфейсе.
  - HTML/CSS/JavaScript — для интерфейса пользователя.
- **База данных:**
  - SQLite (временное решение).
  - PostgreSQL (в процессе миграции).

- **Инструменты:**
  - Uvicorn — ASGI-сервер для запуска FastAPI.
  - Docker и Docker Compose — для контейнеризации (в разработке).

---

## Установка и запуск

### Требования
- Python 3.12
- PostgreSQL (или SQLite для текущей версии)
- Установленные зависимости из `requirements.txt`

### Установка
1. Клонируйте репозиторий:
   ```
   git clone https://github.com/Edvvard0/med_services.git
   cd med_services
   ```
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
3. Примените миграции:
   ```
   alembic revision --autogenerate -m "Initial migration"
   alembic upgrade head
   ```

### Запуск
- Локально:
  ```
  uvicorn app.main:app --reload
  ```
- Через Docker:
  ```
  docker build -t med_services .
  ```
  ```commandline
    docker run -p 8000:8000 med_services
    ```

### Страница со всеми эндпоинтами


 ```
    http://127.0.0.1:8000/docs#/
```


## Планы по улучшению проекта

В текущей версии реализованы основные функции согласно ТЗ, но есть несколько моментов, которые я планирую доработать:

1. **Рефакторинг кода:**
   - Устранение дублирования кода путём вынесения общей логики в базовые классы.
   - Исправление "костылей" в некоторых частях проекта для повышения читаемости и поддерживаемости.
2. **Перенос хранения данных:**
   - Переход с локального хранения (файлы на диске) на облачное S3-хранилище для фото и документов.
3. **Миграция базы данных:**
   - Временная БД SQLite будет заменена на PostgreSQL для лучшей масштабируемости и производительности.
4. **Завершение веб-интерфейса для документов:**
   - Эндпоинты для формирования согласия на обработку данных и договоров уже написаны, но требуется добавить веб-часть для их скачивания.
5. **Улучшение валидации:**
   - Настройка строгой валидации данных от пользователя на уровне Pydantic и API.
6. **Кастомные исключения:**
   - Создание собственных классов исключений для более точной обработки ошибок.
7. **Автозаполнение тестовыми данными:**
   - Разработка скрипта для автоматической генерации тестовых данных в БД.
8. **Проверка доступности кабинетов:**
   - Добавление логики проверки занятости кабинетов при записи на медицинские процедуры.

---
